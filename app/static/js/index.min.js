(()=>{const e=location.origin,t=new URL("api/auth/sign-in",e),n=new URL("api/auth/register/apply",e),s=new URL("api/auth/register/new-code",e),i=new URL("api/auth/register/verify",e),o=new URL("api/auth/restore/apply",e),d=new URL("api/auth/restore/new-code",e),l=new URL("api/auth/restore/verify",e),a=new URL("api/auth/refresh-tokens",e),r="#8935a2",c="#000000",m="#BF1A3E",u=400;function g(){let e="unknown browser",t="unknown os",n="",s=navigator.userAgent;s.indexOf("Edg")>-1?e="Microsoft Edge":s.indexOf("Chrome")>-1?e="Chrome":s.indexOf("Firefox")>-1?e="Firefox":s.indexOf("Safari")>-1?e="Safari":s.indexOf("Opera")>-1?e="Opera":(s.indexOf("Trident")>-1||s.indexOf("MSIE")>-1)&&(e="Internet Explorer");const i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(let e in i){let n=i[e];if(n.r.test(s)){t=n.s;break}}switch(/Windows/.test(t)&&(n=/Windows (.*)/.exec(t)[1],t="Windows"),t){case"Mac OS":case"Mac OS X":case"Android":n=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\.\_\d]+)/.exec(s)[1];break;case"iOS":n=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer),n=n[1]+"."+n[2]+"."+(0|n[3])}return e+", "+t+n}!function(){let e=p("access_token");if(""!=e&&Math.floor(Date.now()/1e3)+10800<Number(JSON.parse(atob(e.split(".")[1])).exp)-1)return!1;return!0}()?B():I(),function e(){setTimeout((()=>{I(),e()}),57e4)}();const y="Try your trading skills on CryptoDeal.",f="Buy, sell and track changes in your cryptowallet.";function E(e,t,n,s){t<e.length&&(document.getElementById(s).innerHTML+=e.charAt(t),t++,setTimeout((()=>{E(e,t,n,s)}),n))}async function I(){200===(await fetch(a,{method:"POST",credentials:"same-origin",headers:{"X-SCRF-TOKEN":p("refresh_scrf_token"),Device:g()}})).status&&B()}function p(e){e+="=";let t=document.cookie.split("; "),n="";return t.forEach((t=>{t.substring(0,e.length)===e&&(n=t.substring(e.length,t.length))})),n}function B(){authClasses=document.getElementById("auth-button").classList,profileClasses=document.getElementById("profile-button").classList,!authClasses.contains("display-off")&&profileClasses.contains("display-off")&&(authClasses.add("display-off"),profileClasses.remove("display-off"));let e=p("access_token"),t=JSON.parse(atob(e.split(".")[1]));document.getElementById("name").innerText=t.name,document.getElementById("avatar").src=new URL(`/static/png/Alien${t.alien_number}.png`,location.origin)}function h(){document.getElementsByClassName("auth-button")[0].disabled=!0,document.getElementsByClassName("auth-button")[1].disabled=!0}function w(){document.getElementsByClassName("auth-button")[0].disabled=!1,document.getElementsByClassName("auth-button")[1].disabled=!1}function b(){document.getElementById("mode-light").style.transform="translate(0%)",document.getElementById("auth-mode").style.setProperty("--right-switch-color",r),document.getElementById("auth-mode").style.setProperty("--left-switch-color",c),document.getElementById("register-container").style.left="-150%",document.getElementById("login-container").style.left="0%"}function v(){document.getElementById("mode-light").style.transform="translate(100%)",document.getElementById("auth-mode").style.setProperty("--left-switch-color",r),document.getElementById("auth-mode").style.setProperty("--right-switch-color",c),document.getElementById("register-container").style.left="0%",document.getElementById("login-container").style.left="150%"}function L(){document.getElementById("login").style.left="-50%",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("login-info").innerText="",document.getElementById("register-info").innerText="",document.getElementById("register-name-input").value="",document.getElementById("register-pass-input").value="",document.getElementById("register-email-input").value="",document.getElementById("login-name-input").value="",document.getElementById("login-pass-input").value="",w()}function T(){document.getElementById("confirm-window").style.left="150%",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("input-code").style.color=r,document.getElementById("input-code").value="",w(),W&&k(S)}let S;null!=document.getElementById("motto-container")&&(E(y,0,40,"motto1"),setTimeout((()=>{E(f,0,40,"motto2")}),1560),setTimeout((()=>{E("Easy, fast and losslessly.",0,40,"motto3")}),3520)),document.getElementById("left-switch").onclick=b,document.getElementById("right-switch").onclick=v,document.getElementById("sign-up").onclick=function(){document.getElementById("mode-light").classList.add("transition-off"),document.getElementById("register-container").classList.add("transition-off"),document.getElementById("login-container").classList.add("transition-off"),v(),setTimeout((()=>{document.getElementById("mode-light").classList.remove("transition-off"),document.getElementById("register-container").classList.remove("transition-off"),document.getElementById("login-container").classList.remove("transition-off")}),u),document.getElementById("login").style.left="50%",document.getElementById("main").style.filter="brightness(0.3)",document.getElementById("navbar").style.filter="brightness(0.3)",h()},document.getElementById("sign-in").onclick=function(){document.getElementById("mode-light").classList.add("transition-off"),document.getElementById("register-container").classList.add("transition-off"),document.getElementById("login-container").classList.add("transition-off"),b(),setTimeout((()=>{document.getElementById("mode-light").classList.remove("transition-off"),document.getElementById("register-container").classList.remove("transition-off"),document.getElementById("login-container").classList.remove("transition-off")}),u),document.getElementById("login").style.left="50%",document.getElementById("main").style.filter="brightness(0.3)",document.getElementById("navbar").style.filter="brightness(0.3)",h()},document.getElementById("cancel").onclick=L,document.getElementById("mail-cancel").onclick=T,document.getElementById("email-cancel").onclick=M,document.getElementById("mail-cancel-rec").onclick=A,document.getElementById("code-btn").onclick=async function(){let e=new Map;e.set("email",sessionStorage.getItem("email-reg")),response=await fetch(s,{method:"PATCH",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id")},body:JSON.stringify(Object.fromEntries(e))}),200==response.status&&(document.getElementById("get-code-wrapper").classList.add("display-off"),document.getElementById("new-code").classList.remove("display-off"),document.getElementById("input-code").style.color=r,document.getElementById("input-code").value="",S=x(30))},document.getElementById("code-btn-rec").onclick=async function(){let e=new Map;e.set("email",sessionStorage.getItem("email-rec"));let t=await fetch(d,{method:"PATCH",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id")},body:JSON.stringify(Object.fromEntries(e))});200===t.status&&(document.getElementById("get-code-wrapper-rec").classList.add("display-off"),document.getElementById("new-code-rec").classList.remove("display-off"),document.getElementById("input-code-rec").value="",C&&P(O),O=N(30),C=!0);if(404===t.status||425===t.status){let e=await t.json();document.getElementById("new-pass-info").innerText=e.error.message}},document.getElementById("login-form-id").addEventListener("submit",(async e=>{e.preventDefault();let n=new FormData(document.getElementById("login-form-id")),s=await fetch(t,{method:"POST",credentials:"same-origin",body:n,headers:{Device:g()}});if(200==s.status)L(),B();else{let e=await s.json();document.getElementById("login-info").innerHTML=e.error.message}})),document.getElementById("register-form-id").addEventListener("submit",(async e=>{e.preventDefault();let t=new FormData(document.getElementById("register-form-id"));if(function(e){const t=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;let n=e.get("username"),s=e.get("password"),i=e.get("email");if(n.length<6||n.length>20)return document.getElementById("register-info").innerText="Username length must be between 6 and 20",!1;if(n.includes(" "))return document.getElementById("register-info").innerText="Username can't include any spaces",!1;if(s.length<6||s.length>20)return document.getElementById("register-info").innerText="Password length must be between 6 and 20",!1;if(s.includes(" "))return document.getElementById("register-info").innerText="Password can't include any spaces",!1;if(!t.test(i))return document.getElementById("register-info").innerText="Invalid email",!1;return!0}(t)){let e=await fetch(n,{method:"POST",credentials:"same-origin",body:t});if(201==e.status){W&&k(S),sessionStorage.setItem("request_id",e.headers.get("Request-Id")),document.getElementById("get-code-wrapper").classList.add("display-off"),document.getElementById("new-code").classList.remove("display-off"),document.getElementById("input-code").style.color=r,document.getElementById("input-code").value="",S=x(30);let t=document.getElementById("register-email-input").value;sessionStorage.setItem("email-reg",t),L(),function(e){document.getElementById("email").innerText=e,document.getElementById("confirm-window").style.left="50%",document.getElementById("main").style.filter="brightness(0.3)",document.getElementById("navbar").style.filter="brightness(0.3)",h()}(t)}else error=await e.json(),document.getElementById("register-info").innerHTML=error.error.message}})),document.onkeydown=function(e){let t=!1;t="key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode,t&&L()},document.addEventListener("input",(()=>{6===document.getElementById("input-code").value.length?async function(){let e=new Map;e.set("code",document.getElementById("input-code").value),response=await fetch(i,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id"),Device:g()},body:JSON.stringify(Object.fromEntries(e))}),200==response.status?(T(),B()):document.getElementById("input-code").style.color=m}():document.getElementById("input-code").style.color=r}));let O,W=!1;function x(e){W=!0;let t=Math.floor(e/60),n=e%60;S=setInterval((()=>{let e;e=n<10?`${t}:0${n}`:`${t}:${n}`,document.getElementById("code-time").innerHTML=e,0!=n?n-=1:(t-=1,n=59)}),1e3);let s=S;return setTimeout((()=>{s==S&&(k(S),document.getElementById("new-code").classList.add("display-off"),document.getElementById("get-code-wrapper").classList.remove("display-off"))}),1e3*(e+1)),S}function k(e){clearInterval(e),W=!1}function M(){document.getElementById("email-window").style.left="150%",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("email-input-recovery").value="",document.getElementById("pass-info").innerText="",w()}function A(){C&&P(O),document.getElementById("confirm-window-rec").style.left="-50%",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("input-code-rec").value="",document.getElementById("email-rec1").value="",document.getElementById("email-rec2").value="",document.getElementById("new-pass-info").innerText="",w()}document.getElementById("recovery-btn").addEventListener("click",(()=>{L(),document.getElementById("email-window").style.left="50%",document.getElementById("main").style.filter="brightness(0.3)",document.getElementById("navbar").style.filter="brightness(0.3)",h()})),document.getElementById("email-submit").addEventListener("click",(async e=>{e.preventDefault();const t=document.getElementById("email-input-recovery").value;sessionStorage.setItem("email-rec",t);let n=new Map;n.set("email",t);let s=await fetch(o,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(n))});if(201===s.status)M(),function(e){document.getElementById("email-rec").innerText=e,document.getElementById("confirm-window-rec").style.left="50%",document.getElementById("main").style.filter="brightness(0.3)",document.getElementById("navbar").style.filter="brightness(0.3)",h()}(t),C&&P(O),document.getElementById("get-code-wrapper-rec").classList.add("display-off"),document.getElementById("new-code-rec").classList.remove("display-off"),O=N(30),sessionStorage.setItem("request_id",s.headers.get("Request-Id"));else if(404===s.status||425===s.status){let e=await s.json();document.getElementById("pass-info").innerText=e.error.message}})),document.getElementById("submit-rec").addEventListener("click",(async e=>{e.preventDefault();let t=document.getElementById("email-rec1").value;if(t!=document.getElementById("email-rec2").value)return void(document.getElementById("new-pass-info").innerText="Passwords aren't match");if(t.length<6||t.length>20)return void(document.getElementById("new-pass-info").innerText="Password length must be between 6 and 20");let n=await fetch(l,{method:"Post",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id"),Device:g()},body:JSON.stringify({password:t,code:document.getElementById("input-code-rec").value})});200===n.status&&(A(),B()),429!==n.status&&400!==n.status||(error=await n.json(),document.getElementById("new-pass-info").innerText=error.error.message)}));let C=!1;function N(e){C=!0;let t=Math.floor(e/60),n=e%60;O=setInterval((()=>{let e;e=n<10?`${t}:0${n}`:`${t}:${n}`,document.getElementById("code-time-rec").innerHTML=e,0!=n?n-=1:(t-=1,n=59)}),1e3);let s=O;return setTimeout((()=>{s==O&&C&&(P(O),document.getElementById("new-code-rec").classList.add("display-off"),document.getElementById("get-code-wrapper-rec").classList.remove("display-off"))}),1e3*(e+1)),O}function P(e){clearInterval(e),C=!1}document.getElementById("login-visibility-button").addEventListener("click",(()=>{const e=document.getElementById("login-visibility-button");"hidden"===e.getAttribute("data-state")?(document.getElementById("login-pass-input").setAttribute("type","text"),document.getElementById("login-pass-show-icon").classList.add("display-off"),document.getElementById("login-pass-hide-icon").classList.remove("display-off"),e.setAttribute("data-state","visible")):(document.getElementById("login-pass-input").setAttribute("type","password"),document.getElementById("login-pass-show-icon").classList.remove("display-off"),document.getElementById("login-pass-hide-icon").classList.add("display-off"),e.setAttribute("data-state","hidden"))})),document.getElementById("register-visibility-button").addEventListener("click",(()=>{const e=document.getElementById("register-visibility-button");"hidden"===e.getAttribute("data-state")?(document.getElementById("register-pass-input").setAttribute("type","text"),document.getElementById("register-pass-show-icon").classList.add("display-off"),document.getElementById("register-pass-hide-icon").classList.remove("display-off"),e.setAttribute("data-state","visible")):(document.getElementById("register-pass-input").setAttribute("type","password"),document.getElementById("register-pass-show-icon").classList.remove("display-off"),document.getElementById("register-pass-hide-icon").classList.add("display-off"),e.setAttribute("data-state","hidden"))})),document.getElementById("recover-visibility-button1").addEventListener("click",(()=>{const e=document.getElementById("recover-visibility-button1");"hidden"===e.getAttribute("data-state")?(document.getElementById("email-rec1").setAttribute("type","text"),document.getElementById("recover-pass-show-icon1").classList.add("display-off"),document.getElementById("recover-pass-hide-icon1").classList.remove("display-off"),e.setAttribute("data-state","visible")):(document.getElementById("email-rec1").setAttribute("type","password"),document.getElementById("recover-pass-show-icon1").classList.remove("display-off"),document.getElementById("recover-pass-hide-icon1").classList.add("display-off"),e.setAttribute("data-state","hidden"))})),document.getElementById("recover-visibility-button2").addEventListener("click",(()=>{const e=document.getElementById("recover-visibility-button2");"hidden"===e.getAttribute("data-state")?(document.getElementById("email-rec2").setAttribute("type","text"),document.getElementById("recover-pass-show-icon2").classList.add("display-off"),document.getElementById("recover-pass-hide-icon2").classList.remove("display-off"),e.setAttribute("data-state","visible")):(document.getElementById("email-rec2").setAttribute("type","password"),document.getElementById("recover-pass-show-icon2").classList.remove("display-off"),document.getElementById("recover-pass-hide-icon2").classList.add("display-off"),e.setAttribute("data-state","hidden"))}))})();