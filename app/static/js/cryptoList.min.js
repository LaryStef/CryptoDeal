(()=>{"use strict";const e=location.origin,t=new URL("api/auth/sign-in",e),n=new URL("api/auth/register/apply",e),s=new URL("api/auth/register/new-code",e),i=new URL("api/auth/register/verify",e),o=new URL("api/auth/restore/apply",e),r=new URL("api/auth/restore/new-code",e),a=new URL("api/auth/restore/verify",e),d=new URL("api/auth/refresh-tokens",e),l=new URL("api/crypto/list",e);function c(){let e="unknown browser",t="unknown os",n="",s=navigator.userAgent;s.indexOf("Edg")>-1?e="Microsoft Edge":s.indexOf("Chrome")>-1?e="Chrome":s.indexOf("Firefox")>-1?e="Firefox":s.indexOf("Safari")>-1?e="Safari":s.indexOf("Opera")>-1?e="Opera":(s.indexOf("Trident")>-1||s.indexOf("MSIE")>-1)&&(e="Internet Explorer");const i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(let e in i){let n=i[e];if(n.r.test(s)){t=n.s;break}}switch(/Windows/.test(t)&&(n=/Windows (.*)/.exec(t)[1],t="Windows"),t){case"Mac OS":case"Mac OS X":case"Android":n=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\.\_\d]+)/.exec(s)[1];break;case"iOS":n=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer),n=n[1]+"."+n[2]+"."+(0|n[3])}return e+", "+t+n}function m(e){e+="=";let t=document.cookie.split("; "),n="";return t.forEach((t=>{t.substring(0,e.length)===e&&(n=t.substring(e.length,t.length))})),n}function u(){authClasses=document.getElementById("auth-button").classList,profileClasses=document.getElementById("profile-button").classList,!authClasses.contains("display-off")&&profileClasses.contains("display-off")&&(authClasses.add("display-off"),profileClasses.remove("display-off"));let e=m("access_token"),t=JSON.parse(atob(e.split(".")[1]));document.getElementById("name").innerText=t.name,document.getElementById("avatar").src=new URL(`/static/png/Alien${t.alien_number}.png`,location.origin)}function g(){document.getElementsByClassName("auth-link")[0].disabled=!0,document.getElementsByClassName("auth-link")[1].disabled=!0}function y(){document.getElementsByClassName("auth-link")[0].disabled=!1,document.getElementsByClassName("auth-link")[1].disabled=!1}function f(){document.getElementById("mode-light").style.transform="translate(0%)",window.innerWidth<=650?(document.getElementById("register-container").style.transform="translate(-100%)",document.getElementById("login-container").style.transform="translate(0%, -100%)"):window.innerWidth<=1e3?(document.getElementById("register-container").style.transform="translate(-100%)",document.getElementById("login-container").style.transform="translate(5%, -100%)"):(document.getElementById("register-container").style.transform="translate(-100%)",document.getElementById("login-container").style.transform="translate(50%, -100%)")}function E(){document.getElementById("mode-light").style.transform="translate(100%)",window.innerWidth<=650?(document.getElementById("register-container").style.transform="translate(0%)",document.getElementById("login-container").style.transform="translate(100%, -100%)"):window.innerWidth<=1e3?(document.getElementById("register-container").style.transform="translate(5%)",document.getElementById("login-container").style.transform="translate(200%, -100%)"):(document.getElementById("register-container").style.transform="translate(50%)",document.getElementById("login-container").style.transform="translate(200%, -100%)")}function I(){document.getElementById("mode-light").classList.add("transition-off"),document.getElementById("register-container").classList.add("transition-off"),document.getElementById("login-container").classList.add("transition-off"),f(),setTimeout((()=>{document.getElementById("mode-light").classList.remove("transition-off"),document.getElementById("register-container").classList.remove("transition-off"),document.getElementById("login-container").classList.remove("transition-off")}),400);let e=document.getElementById("login");e.style.opacity=1,window.innerWidth<=650?e.style.transform="translate(0%, 30%)":e.style.transform="translate(50%, 30%)",document.getElementById("main").style.filter="brightness(0.5)",document.getElementById("navbar").style.filter="brightness(0.5)",g()}function p(){document.getElementById("mode-light").classList.add("transition-off"),document.getElementById("register-container").classList.add("transition-off"),document.getElementById("login-container").classList.add("transition-off"),E(),setTimeout((()=>{document.getElementById("mode-light").classList.remove("transition-off"),document.getElementById("register-container").classList.remove("transition-off"),document.getElementById("login-container").classList.remove("transition-off")}),400);let e=document.getElementById("login");e.style.opacity=1,window.innerWidth<=650?e.style.transform="translate(0%, 30%)":e.style.transform="translate(50%, 30%)",document.getElementById("main").style.filter="brightness(0.5)",document.getElementById("navbar").style.filter="brightness(0.5)",g()}function B(){let e=document.getElementById("login");e.style.opacity=0,e.style.transform="translate(-100%, 30%)",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("login-info").innerText="",document.getElementById("register-info").innerText="",y()}function w(){let e=document.getElementById("confirm-window");e.style.opacity=0,e.style.transform="translate(200%)",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("input-code").style.backgroundColor="#7d42e7",document.getElementById("input-code").value="",setTimeout((()=>{e.style.visibility="hidden"}),400),y(),v&&S(h)}let h;fetch(l,{method:"GET",credentials:"same-origin"}).then((e=>e.json())).then((e=>{const t=e.CryptoCurrencyList,n=document.getElementById("crypto-list");let s=1;t.forEach((e=>{let t,i,o;t=e.volume>1e9?(Math.round(e.volume/1e6)/1e3).toString()+"B":(Math.round(e.volume/1e3)/1e3).toString()+"M",e.change>=0?(i="+"+Math.round(1e3*e.change)/1e3+"%",o="change-pos"):(i=Math.round(1e3*e.change)/1e3+"%",o="change-neg"),n.innerHTML+=`        \n                    <tr class="row">\n                        <td class="tc col1">${s}</td>\n                        <td class="tc col2">\n                            <div class="crypto-name-wrap">\n                                <img class="crypto-logo" src="${e.logoUrl}" alt="">\n                                <span class="crypto-name">${e.name}</span>\n                            </div>\n                        </td>\n                        <td class="tc col3">${e.ticker}</td>\n                        <td class="tc col4">${Math.round(1e3*e.price)/1e3}</td>\n                        <td class="tc col5 ${o}">${i}</td>\n                        <td class="tc col6">${t}</td>\n                        <td class="tc col7">\n                            <a class="buy-link" href="${e.pageUrl}">\n                                <div class="buy-btn">\n                                    <span>Buy/Sell</span>\n                                </div>\n                            </a>\n                        </td>\n                    </tr>`,s+=1}))})),function(){let e=m("access_token");if(""!=e&&Math.floor(Date.now()/1e3)<Number(JSON.parse(atob(e.split(".")[1])).exp)-1)return u(),!1;return!0}()&&async function(){200===(await fetch(d,{method:"POST",credentials:"same-origin",headers:{"X-SCRF-TOKEN":m("refresh_scrf_token"),Device:c()}})).status&&u()}(),document.getElementById("left-switch").onclick=f,document.getElementById("right-switch").onclick=E,document.getElementById("sign-up").onclick=p,document.getElementById("sign-in").onclick=I,document.getElementById("dropdown-sign-in").onclick=I,document.getElementById("dropdown-sign-up").onclick=p,document.getElementById("cancel").onclick=B,document.getElementById("mail-cancel").onclick=w,document.getElementById("email-cancel").onclick=L,document.getElementById("mail-cancel-rec").onclick=W,document.getElementById("code-btn").onclick=async function(){let e=new Map;e.set("email",sessionStorage.getItem("email-reg")),response=await fetch(s,{method:"PATCH",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id")},body:JSON.stringify(Object.fromEntries(e))}),200==response.status&&(document.getElementById("get-code-wrapper").classList.add("display-off"),document.getElementById("new-code").classList.remove("display-off"),document.getElementById("input-code").style.backgroundColor="#7d42e7",document.getElementById("input-code").value="",h=T(30))},document.getElementById("code-btn-rec").onclick=async function(){let e=new Map;e.set("email",sessionStorage.getItem("email-rec"));let t=await fetch(r,{method:"PATCH",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id")},body:JSON.stringify(Object.fromEntries(e))});200===t.status&&(document.getElementById("get-code-wrapper-rec").classList.add("display-off"),document.getElementById("new-code-rec").classList.remove("display-off"),document.getElementById("input-code-rec").value="",O&&M(b),b=k(30),O=!0);if(404===t.status||425===t.status){let e=await t.json();document.getElementById("new-pass-info").innerText=e.error.message}},document.getElementById("login-form-id").addEventListener("submit",(async e=>{e.preventDefault();let n=new FormData(document.getElementById("login-form-id")),s=await fetch(t,{method:"POST",credentials:"same-origin",body:n,headers:{Device:c()}});if(200==s.status)B(),u();else{let e=await s.json();document.getElementById("login-info").innerHTML=e.error.message}})),document.getElementById("register-form-id").addEventListener("submit",(async e=>{e.preventDefault();let t=new FormData(document.getElementById("register-form-id"));if(function(e){const t=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;let n=e.get("username"),s=e.get("password"),i=e.get("email");if(n.length<6||n.length>20)return document.getElementById("register-info").innerText="username length must be between 6 and 20",!1;if(n.includes(" "))return document.getElementById("register-info").innerText="username can't include any spaces",!1;if(s.length<6||s.length>20)return document.getElementById("register-info").innerText="password length must be between 6 and 20",!1;if(s.includes(" "))return document.getElementById("register-info").innerText="password can't include any spaces",!1;if(!t.test(i))return document.getElementById("register-info").innerText="invalid email",!1;return!0}(t)){let e=await fetch(n,{method:"POST",credentials:"same-origin",body:t});if(201==e.status){v&&S(h),sessionStorage.setItem("request_id",e.headers.get("Request-Id")),document.getElementById("get-code-wrapper").classList.add("display-off"),document.getElementById("new-code").classList.remove("display-off"),document.getElementById("input-code").style.backgroundColor="#7d42e7",document.getElementById("input-code").value="",h=T(30);let t=document.getElementById("email-input").value;sessionStorage.setItem("email-reg",t),B(),function(e){document.getElementById("email").innerText=e;let t=document.getElementById("confirm-window");t.style.opacity=1,t.style.transform="translate(0%)",t.style.visibility="visible",document.getElementById("main").style.filter="brightness(0.5)",document.getElementById("navbar").style.filter="brightness(0.5)",g()}(t)}else error=await e.json(),document.getElementById("register-info").innerHTML=error.error.message}})),document.onkeydown=function(e){let t=!1;t="key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode,t&&B()},document.addEventListener("input",(()=>{6===document.getElementById("input-code").value.length&&async function(){let e=new Map;e.set("code",document.getElementById("input-code").value),response=await fetch(i,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id"),Device:c()},body:JSON.stringify(Object.fromEntries(e))}),200==response.status?(w(),u()):document.getElementById("input-code").style.backgroundColor="#BF1A3E"}()}));let b,v=!1;function T(e){v=!0;let t=Math.floor(e/60),n=e%60;h=setInterval((()=>{let e;e=n<10?`${t}:0${n}`:`${t}:${n}`,document.getElementById("code-time").innerHTML=e,0!=n?n-=1:(t-=1,n=59)}),1e3);let s=h;return setTimeout((()=>{s==h&&(S(h),document.getElementById("new-code").classList.add("display-off"),document.getElementById("get-code-wrapper").classList.remove("display-off"))}),1e3*(e+1)),h}function S(e){clearInterval(e),v=!1}function L(){let e=document.getElementById("email-window");e.style.opacity=0,e.style.transform="translate(-200%)",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("email-input-recovery").value="",document.getElementById("pass-info").innerText="",setTimeout((()=>{e.style.visibility="hidden",e.style.transition="none",e.style.transform="translate(200%)",e.style.transition="all var(--login-transition-duration) ease-out"}),400),y()}function W(){O&&M(b);let e=document.getElementById("confirm-window-rec");e.style.opacity=0,e.style.transform="translate(200%)",document.getElementById("main").style.filter="brightness(1)",document.getElementById("navbar").style.filter="brightness(1)",document.getElementById("input-code-rec").value="",document.getElementById("email-rec1").value="",document.getElementById("email-rec2").value="",document.getElementById("new-pass-info").innerText="",setTimeout((()=>{e.style.visibility="hidden"}),400),y()}document.getElementById("recovery-btn").addEventListener("click",(()=>{B(),function(){let e=document.getElementById("email-window");e.style.opacity=1,e.style.transform="translate(0%)",e.style.visibility="visible",document.getElementById("main").style.filter="brightness(0.5)",document.getElementById("navbar").style.filter="brightness(0.5)",g()}()})),document.getElementById("email-submit").addEventListener("click",(async e=>{e.preventDefault();const t=document.getElementById("email-input-recovery").value;sessionStorage.setItem("email-rec",t);let n=new Map;n.set("email",t);let s=await fetch(o,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(n))});if(201===s.status)L(),function(e){document.getElementById("email-rec").innerText=e;let t=document.getElementById("confirm-window-rec");t.style.opacity=1,t.style.transform="translate(0%)",t.style.visibility="visible",document.getElementById("main").style.filter="brightness(0.5)",document.getElementById("navbar").style.filter="brightness(0.5)",g()}(t),O&&M(b),document.getElementById("get-code-wrapper-rec").classList.add("display-off"),document.getElementById("new-code-rec").classList.remove("display-off"),b=k(30),sessionStorage.setItem("request_id",s.headers.get("Request-Id"));else if(404===s.status||425===s.status){let e=await s.json();document.getElementById("pass-info").innerText=e.error.message}})),document.getElementById("submit-rec").addEventListener("click",(async e=>{e.preventDefault();let t=document.getElementById("email-rec1").value;if(t!=document.getElementById("email-rec2").value)return void(document.getElementById("new-pass-info").innerText="passwords aren't match");if(t.length<6||t.length>20)return void(document.getElementById("new-pass-info").innerText="username length must be between 6 and 20");let n=await fetch(a,{method:"Post",credentials:"same-origin",headers:{"Content-Type":"application/json","Request-Id":sessionStorage.getItem("request_id"),Device:c()},body:JSON.stringify({password:t,code:document.getElementById("input-code-rec").value})});200===n.status&&(W(),u()),429!==n.status&&400!==n.status||(error=await n.json(),document.getElementById("new-pass-info").innerText=error.error.message)}));let O=!1;function k(e){O=!0;let t=Math.floor(e/60),n=e%60;b=setInterval((()=>{let e;e=n<10?`${t}:0${n}`:`${t}:${n}`,document.getElementById("code-time-rec").innerHTML=e,0!=n?n-=1:(t-=1,n=59)}),1e3);let s=b;return setTimeout((()=>{s==b&&O&&(M(b),document.getElementById("new-code-rec").classList.add("display-off"),document.getElementById("get-code-wrapper-rec").classList.remove("display-off"))}),1e3*(e+1)),b}function M(e){clearInterval(e),O=!1}})();